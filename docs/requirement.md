# Plugin Arena for Claude Code — 要件定義書（v1.0）

> ヒアリング（2026-01-15）を反映した確定版。

## 1. 概要
- **目的**：Claude Codeエコシステム（MCP / skills / hooks / commands）の「いま使われている・話題の・長期的に強い」拡張を可視化し、エンジニアの情報収集・共有を支援する。
- **提供価値**：
  - 1) **ランキング**（ELO + GitHubハイブリッドスコア）で俯瞰
  - 2) **ペアワイズ投票**（A vs B）でコミュニティ知見を集約
  - 3) **トレンド**（日次更新）で最新の伸びを可視化
  - 4) **コメント**でユーザーの声を共有
- **非目的**：
  - 罵倒や炎上を誘発する比較機能は提供しない
  - 「人格攻撃・有害行為」を助長するUXは設計しない

## 2. 背景
- AI駆動開発の進化が速く、拡張（ツール/ワークフロー）選定のキャッチアップコストが高い
- LMArenaのように「多数の実利用者の判断で選ばれる仕組み」が、プラグイン領域に必要

## 3. 対象ユーザー
- Claude Codeを利用してAI駆動開発を行うエンジニア

## 4. スコープ

### 4.1 評価対象（In Scope）
- **MCP**
- **skills**
- **hooks**
- **commands（スラッシュコマンド等）**

### 4.2 対象外（Out of Scope）
- VS Code等のエディタ拡張や、Claude Code前提ではないプラグイン

### 4.3 互換性・掲載基準
- Claude Code向けに開発され、投稿/説明文にClaude関連の文面が一定含まれることを最低条件とする
- 「動かないものは基本的に出ない」前提で、厳密な動作検証はMVPでは必須にしない

## 5. 技術スタック
- **Frontend**: Next.js 14+ (App Router)
- **Database**: Supabase (PostgreSQL)
- **Hosting**: Vercel
- **Styling**: Tailwind CSS

## 6. 収録アイテムの最小メタデータ
- **必須**：
  - name
  - GitHub URL
- **任意**：カテゴリ（MCP/skill/hook/command）、タグ、短い説明、導入方法、ライセンス等

## 7. コア機能要件

### 7.1 ランキング（Scoreboard）
- **3軸表示（LMArena風）**
  - Now（いま導入すべき）: メイン表示
  - Trend（伸び）: 直近60日の成長
  - Classic（定番）: All-time累積
- **カテゴリフィルタ**: MCP / skills / hooks / commands
- **表示項目**: 名前、スコア、キーワード（関連ワード）、GitHubリンク
- **詳細ページなし**: 一覧のみで完結

### 7.2 投票（ペアワイズ比較）
- **A vs B形式**: 2つのプラグインを並べて「どちらが良いか」投票
- **同カテゴリ内のみ比較**: MCP同士、skill同士など
- **投票前提**: 「使ったことがある」ユーザーが投票
- **ログイン不要**: MVPでは認証なし
- **投票制限**:
  - 同一ペアへの複数投票は防止（Cookie/IPベース）
  - 異なるペアへの投票は制限なし

### 7.3 コメント機能
- **認証なし**: 匿名で投稿可能
- **モデレーション**: 手動のみ（管理画面で削除）
- **制限**: Cookie/IPでスパム防止

### 7.4 自動収集（Discovery / Indexing）
- **自動収集が前提**
- **ソース（複数組み合わせ）**:
  - GitHub Search API: `claude mcp`, `claude code skill` 等
  - GitHub Topics: `mcp-server`, `claude-code`
  - awesome-mcp 等のキュレーションリスト
- **カテゴリ判定**: キーワードベース + 手動補正
- **収集頻度**: 日次バッチ

## 8. スコアリング要件

### 8.1 スコア体系
- **Now（いま導入すべき）**: 直近の利用実感・伸びを反映した総合評価
- **Trend（伸び）**: 直近60日で伸びたもの
- **Classic（定番）**: All-timeで強いもの

### 8.2 ELOスコア
- ペアワイズ投票結果からBradley-Terryモデルで算出
- 初期値: 1500
- 勝敗に応じてスコアを更新

### 8.3 GitHubスコア
- 目的：導入・普及のシグナルとしてstars等を利用
- MVPで使用する指標：
  - Classic：stars（累積）
  - Trend：stars増分（直近60日）
- 正規化：対数変換で 0〜100 に正規化

### 8.4 総合スコア
- **ELO + GitHubのハイブリッド**
- 重み配分は運用しながら調整

### 8.5 日次再計算
- 投票・GitHub指標は日次で再計算
- ランキングは常に最新状態を反映

### 8.6 Version更新への追随（Evaluation Epoch）
- GitHub Release検知でEpochを切り替える
- Nowの集計は最新Epoch（最新Release以降）の評価を最も強く反映
- Releaseが無い場合：初回検知日をEpoch開始日として扱う

### 8.7 票数が少ない段階の扱い
- 表示上に併設：
  - 投票数（n）
  - 信頼度ラベル（例：nが少ない場合は"Low confidence"）
- 投票が十分集まるまでGitHub Scoreの相対的影響が高くなるよう調整

## 9. モデレーション/安全
- 公式/非公式の厳格な証明は必須ではない
- 危険プラグイン対策は、MVPでは強い介入はしない
- ログイン無し投票の防御（MVP）：
  - Cookie/IPベースのレート制限（同一ペアへの投票は一定時間に1回まで）
  - 異常投票の検知ログ
  - 管理者による除外/注記フラグ（最終手段）

## 10. MVP範囲
- **対象カテゴリ**: MCP / skills / hooks / commands（全部）
- **画面**:
  - ランキング（Now/Trend/Classic）
  - 投票画面（ペアワイズ）
  - コメント（ランキング内埋め込み）
  - 管理画面（モデレーション用）
- **言語**: 日本語優先
- **レスポンシブ**: モバイル対応必須
- **収益化**: 現時点ではなし

## 11. 将来の拡張候補（MVP外）
- X言及数/増分をトレンド要素に含める
- ユーザー認証（GitHub OAuth）
- ユーザーからのプラグイン提案機能
- 詳細ページ（個別プラグインの専用ページ）
- 多言語対応（英語）

---

## ヒアリング決定事項（ログ要約）
- 掲載基準：Claude文面が一定あれば十分（厳密検証は必須にしない）
- 追加カテゴリ：hooks
- 最小メタデータ：name + GitHub URL
- **投票方式**：ペアワイズ比較（A vs B）← LMArena風
- **スコア**：ELO + GitHubのハイブリッド
- 更新頻度：日次
- トレンド：直近60日（将来X言及を含める、MVPは省略可）
- 収集：自動収集（GitHub Search + Topics + awesome）
- カテゴリ判定：キーワード + 手動補正
- 公式/非公式：必須ではない
- 危険対策：強い介入はしない
- **コメント機能**：匿名で投稿可能、手動モデレーション
- MVP画面：ランキング / 投票 / コメント + 管理画面
- **比較範囲**：同カテゴリ内のみ
- 詳細ページ：不要（キーワード + GitHubリンクで十分）
- モバイル対応：必須（レスポンシブ）
- 言語：日本語優先
- 収益化：現状なし
